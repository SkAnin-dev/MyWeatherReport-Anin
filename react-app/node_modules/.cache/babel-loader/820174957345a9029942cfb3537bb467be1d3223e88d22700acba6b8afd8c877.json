{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import Header from'./components/Header';import Hero from'./components/Hero';import Marquee from'./components/Marquee';import AddCityForm from'./components/AddCityForm';import CityList from'./components/CityList';import Footer from'./components/Footer';import Notification from'./components/Notification';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){// These defaults match your Django DEFAULT_CITIES.\nconst defaultCities=[{id:'tokyo',name:'Tokyo'},{id:'newyork',name:'New York'},{id:'london',name:'London'}];const[cities,setCities]=useState(()=>{const stored=localStorage.getItem('cities');let initialCities=stored?JSON.parse(stored):[];defaultCities.forEach(defaultCity=>{if(!initialCities.some(city=>String(city.id).toLowerCase()===defaultCity.id)){initialCities.push(defaultCity);}});return initialCities;});useEffect(()=>{localStorage.setItem('cities',JSON.stringify(cities));},[cities]);const[notification,setNotification]=useState(null);const formRef=useRef(null);const showNotification=notif=>{setNotification(notif);window.scrollTo({top:0,behavior:'smooth'});};const addCity=newCity=>{setCities(prev=>[...prev,newCity]);};const removeCity=cityId=>{setCities(prev=>prev.filter(city=>city.id!==cityId));};// Call CSRF endpoint on startup.\nuseEffect(()=>{fetch('/set-csrf/',{credentials:'include'}).then(response=>{console.log(\"Set CSRF response status:\",response.status);}).catch(err=>console.error(\"Error setting CSRF cookie:\",err));},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Hero,{}),/*#__PURE__*/_jsx(Marquee,{}),/*#__PURE__*/_jsx(\"section\",{className:\"section\",style:{background:\"url('/media/metofficegovuk_heroXLarge.jpeg') no-repeat center center\",backgroundSize:'cover'},children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"columns\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"column is-offset-4 is-4\",ref:formRef,children:[/*#__PURE__*/_jsx(AddCityForm,{cities:cities,onCityAdded:addCity,showNotification:showNotification}),notification&&/*#__PURE__*/_jsx(Notification,{type:notification.type,message:notification.message,onClose:()=>setNotification(null)})]})})})}),/*#__PURE__*/_jsx(\"section\",{className:\"section\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"columns\",children:/*#__PURE__*/_jsx(CityList,{cities:cities,onCityDeleted:removeCity,showNotification:showNotification})})})}),/*#__PURE__*/_jsx(\"hr\",{style:{borderTop:\"2px solid #000\",marginBottom:0}}),/*#__PURE__*/_jsx(Footer,{})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","Header","Hero","Marquee","AddCityForm","CityList","Footer","Notification","jsx","_jsx","jsxs","_jsxs","App","defaultCities","id","name","cities","setCities","stored","localStorage","getItem","initialCities","JSON","parse","forEach","defaultCity","some","city","String","toLowerCase","push","setItem","stringify","notification","setNotification","formRef","showNotification","notif","window","scrollTo","top","behavior","addCity","newCity","prev","removeCity","cityId","filter","fetch","credentials","then","response","console","log","status","catch","err","error","children","className","style","background","backgroundSize","ref","onCityAdded","type","message","onClose","onCityDeleted","borderTop","marginBottom"],"sources":["/user/HS400/sa03742/MyWeatherReport/react-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport Header from './components/Header';\nimport Hero from './components/Hero';\nimport Marquee from './components/Marquee';\nimport AddCityForm from './components/AddCityForm';\nimport CityList from './components/CityList';\nimport Footer from './components/Footer';\nimport Notification from './components/Notification';\n\nfunction App() {\n  // These defaults match your Django DEFAULT_CITIES.\n  const defaultCities = [\n    { id: 'tokyo', name: 'Tokyo' },\n    { id: 'newyork', name: 'New York' },\n    { id: 'london', name: 'London' }\n  ];\n\n  const [cities, setCities] = useState(() => {\n    const stored = localStorage.getItem('cities');\n    let initialCities = stored ? JSON.parse(stored) : [];\n    defaultCities.forEach(defaultCity => {\n      if (!initialCities.some(city => String(city.id).toLowerCase() === defaultCity.id)) {\n        initialCities.push(defaultCity);\n      }\n    });\n    return initialCities;\n  });\n\n  useEffect(() => {\n    localStorage.setItem('cities', JSON.stringify(cities));\n  }, [cities]);\n\n  const [notification, setNotification] = useState(null);\n  const formRef = useRef(null);\n\n  const showNotification = (notif) => {\n    setNotification(notif);\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  const addCity = (newCity) => {\n    setCities(prev => [...prev, newCity]);\n  };\n\n  const removeCity = (cityId) => {\n    setCities(prev => prev.filter(city => city.id !== cityId));\n  };\n\n  // Call CSRF endpoint on startup.\n  useEffect(() => {\n    fetch('/set-csrf/', { credentials: 'include' })\n      .then(response => {\n        console.log(\"Set CSRF response status:\", response.status);\n      })\n      .catch(err => console.error(\"Error setting CSRF cookie:\", err));\n  }, []);\n\n  return (\n    <div>\n      <Header />\n      <Hero />\n      <Marquee />\n      <section\n        className=\"section\"\n        style={{\n          background: \"url('/media/metofficegovuk_heroXLarge.jpeg') no-repeat center center\",\n          backgroundSize: 'cover'\n        }}\n      >\n        <div className=\"container\">\n          <div className=\"columns\">\n            <div className=\"column is-offset-4 is-4\" ref={formRef}>\n              <AddCityForm\n                cities={cities}\n                onCityAdded={addCity}\n                showNotification={showNotification}\n              />\n              {notification && (\n                <Notification\n                  type={notification.type}\n                  message={notification.message}\n                  onClose={() => setNotification(null)}\n                />\n              )}\n            </div>\n          </div>\n        </div>\n      </section>\n      <section className=\"section\">\n        <div className=\"container\">\n          <div className=\"columns\">\n            <CityList\n              cities={cities}\n              onCityDeleted={removeCity}\n              showNotification={showNotification}\n            />\n          </div>\n        </div>\n      </section>\n      <hr style={{ borderTop: \"2px solid #000\", marginBottom: 0 }} />\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}