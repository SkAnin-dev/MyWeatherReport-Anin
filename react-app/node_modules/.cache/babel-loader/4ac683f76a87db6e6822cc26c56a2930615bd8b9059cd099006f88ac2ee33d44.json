{"ast":null,"code":"var _jsxFileName = \"/user/HS400/sa03742/MyWeatherReport/react-app/src/components/AddCityForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport Notification from './Notification';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddCityForm = () => {\n  _s();\n  const [cityName, setCityName] = useState('');\n  const [notification, setNotification] = useState(null);\n  const handleSubmit = e => {\n    e.preventDefault();\n    const trimmedName = cityName.trim();\n    if (!trimmedName) return;\n\n    // Optional: Validate city via external API before submitting\n    const apikey = 'BP8GPRYV53UQ56SHJR5EFCJ77';\n    const apiUrl = `https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${encodeURIComponent(trimmedName)}?unitGroup=metric&key=${apikey}&contentType=json`;\n    fetch(apiUrl).then(res => {\n      if (!res.ok) throw new Error(\"Invalid city\");\n      return res.json();\n    }).then(data => {\n      if (data.days && data.days.length > 0) {\n        // Submit new city to your backend AJAX endpoint\n        fetch('/ajax/cities/add/', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            name: trimmedName\n          })\n        }).then(res => res.json()).then(result => {\n          if (result.status === 'success') {\n            setNotification({\n              type: 'success',\n              message: 'City added successfully!'\n            });\n            setCityName('');\n            // Optionally, trigger a reload of the city list (via context, state lifting, etc.)\n          } else {\n            setNotification({\n              type: 'danger',\n              message: result.errors ? JSON.stringify(result.errors) : `City '${trimmedName}' already exists!`\n            });\n          }\n        }).catch(err => {\n          setNotification({\n            type: 'danger',\n            message: 'Error adding city.'\n          });\n        });\n      } else {\n        setNotification({\n          type: 'danger',\n          message: `City '${trimmedName}' does not exist!`\n        });\n      }\n    }).catch(err => {\n      setNotification({\n        type: 'danger',\n        message: `City '${trimmedName}' does not exist!`\n      });\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [notification && /*#__PURE__*/_jsxDEV(Notification, {\n      type: notification.type,\n      message: notification.message,\n      onClose: () => setNotification(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      id: \"addCityForm\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"field has-addons\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"control is-expanded\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input\",\n            name: \"name\",\n            type: \"text\",\n            placeholder: \"City Name\",\n            required: true,\n            value: cityName,\n            onChange: e => setCityName(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"control\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"button is-info\",\n            type: \"submit\",\n            children: \"Add City\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n_s(AddCityForm, \"Xo7yA6EksHuXTibbUZbdnwTSAOY=\");\n_c = AddCityForm;\nexport default AddCityForm;\nvar _c;\n$RefreshReg$(_c, \"AddCityForm\");","map":{"version":3,"names":["React","useState","Notification","jsxDEV","_jsxDEV","AddCityForm","_s","cityName","setCityName","notification","setNotification","handleSubmit","e","preventDefault","trimmedName","trim","apikey","apiUrl","encodeURIComponent","fetch","then","res","ok","Error","json","data","days","length","method","headers","body","JSON","stringify","name","result","status","type","message","errors","catch","err","children","onClose","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","id","className","placeholder","required","value","onChange","target","_c","$RefreshReg$"],"sources":["/user/HS400/sa03742/MyWeatherReport/react-app/src/components/AddCityForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport Notification from './Notification';\n\nconst AddCityForm = () => {\n  const [cityName, setCityName] = useState('');\n  const [notification, setNotification] = useState(null);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const trimmedName = cityName.trim();\n    if (!trimmedName) return;\n\n    // Optional: Validate city via external API before submitting\n    const apikey = 'BP8GPRYV53UQ56SHJR5EFCJ77';\n    const apiUrl = `https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${encodeURIComponent(trimmedName)}?unitGroup=metric&key=${apikey}&contentType=json`;\n    \n    fetch(apiUrl)\n      .then(res => {\n        if (!res.ok) throw new Error(\"Invalid city\");\n        return res.json();\n      })\n      .then(data => {\n        if (data.days && data.days.length > 0) {\n          // Submit new city to your backend AJAX endpoint\n          fetch('/ajax/cities/add/', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ name: trimmedName })\n          })\n            .then(res => res.json())\n            .then(result => {\n              if (result.status === 'success') {\n                setNotification({ type: 'success', message: 'City added successfully!' });\n                setCityName('');\n                // Optionally, trigger a reload of the city list (via context, state lifting, etc.)\n              } else {\n                setNotification({ type: 'danger', message: result.errors ? JSON.stringify(result.errors) : `City '${trimmedName}' already exists!` });\n              }\n            })\n            .catch(err => {\n              setNotification({ type: 'danger', message: 'Error adding city.' });\n            });\n        } else {\n          setNotification({ type: 'danger', message: `City '${trimmedName}' does not exist!` });\n        }\n      })\n      .catch(err => {\n        setNotification({ type: 'danger', message: `City '${trimmedName}' does not exist!` });\n      });\n  };\n\n  return (\n    <div>\n      {notification && (\n        <Notification type={notification.type} message={notification.message} onClose={() => setNotification(null)} />\n      )}\n      <form onSubmit={handleSubmit} id=\"addCityForm\">\n        <div className=\"field has-addons\">\n          <div className=\"control is-expanded\">\n            <input \n              className=\"input\" \n              name=\"name\" \n              type=\"text\" \n              placeholder=\"City Name\" \n              required \n              value={cityName}\n              onChange={e => setCityName(e.target.value)}\n            />\n          </div>\n          <div className=\"control\">\n            <button className=\"button is-info\" type=\"submit\">Add City</button>\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default AddCityForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}